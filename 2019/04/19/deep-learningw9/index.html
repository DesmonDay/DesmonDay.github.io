<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="python," />





  <link rel="alternate" href="/atom.xml" title="DesmonDay's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="进行误差分析：Carrying out error analysis误差分析在我们实际进行机器学习项目中是非常重要的一步，它有利于提高我们的模型表现，使我们的算法逼近人类水平。 Look at dev examples to evaluate ideas假设我们有这样的一个例子，我们要做一个猫分类的分类器，但是其准确率只有90%，也就是错误率为10%。在分析了分类错误的例子后，发现图片将一些狗狗也">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="第9周-机器学习ML策略(2)">
<meta property="og:url" content="https://github.com/DesmonDay/2019/04/19/deep-learningw9/index.html">
<meta property="og:site_name" content="DesmonDay&#39;s Blog">
<meta property="og:description" content="进行误差分析：Carrying out error analysis误差分析在我们实际进行机器学习项目中是非常重要的一步，它有利于提高我们的模型表现，使我们的算法逼近人类水平。 Look at dev examples to evaluate ideas假设我们有这样的一个例子，我们要做一个猫分类的分类器，但是其准确率只有90%，也就是错误率为10%。在分析了分类错误的例子后，发现图片将一些狗狗也">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-0e2f83c5f04414c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-caf8cb8796b21c6a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-da04376f26606d58.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-4a79da8bd8e032f3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-acd65f5c48cb9d3c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-7aafc877af5260c4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-a2f3061afcf667dc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-5753e279568bb523.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-96f55fa26dd3d316.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-85af1351aa5ff193.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-f92f4e0d14f6090e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-bf2ebd879b1f7cf5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-440a23bb73685536.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-7fab9a09060765cd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-0f225f4c2619ef3e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-c60ffb7b9921f087.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-8bb1cf8c2d14663b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/8636110-e9c10274268d9c66.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2019-04-20T08:37:49.138Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第9周-机器学习ML策略(2)">
<meta name="twitter:description" content="进行误差分析：Carrying out error analysis误差分析在我们实际进行机器学习项目中是非常重要的一步，它有利于提高我们的模型表现，使我们的算法逼近人类水平。 Look at dev examples to evaluate ideas假设我们有这样的一个例子，我们要做一个猫分类的分类器，但是其准确率只有90%，也就是错误率为10%。在分析了分类错误的例子后，发现图片将一些狗狗也">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/8636110-0e2f83c5f04414c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://github.com/DesmonDay/2019/04/19/deep-learningw9/"/>





  <title>第9周-机器学习ML策略(2) | DesmonDay's Blog</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DesmonDay's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">一只小辣鸡的自我拯救之路</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/DesmonDay/2019/04/19/deep-learningw9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DesmonDay">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DesmonDay's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">第9周-机器学习ML策略(2)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-19T15:11:05+08:00">
                2019-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/深度学习/" itemprop="url" rel="index">
                    <span itemprop="name">深度学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="进行误差分析：Carrying-out-error-analysis"><a href="#进行误差分析：Carrying-out-error-analysis" class="headerlink" title="进行误差分析：Carrying out error analysis"></a>进行误差分析：Carrying out error analysis</h1><p>误差分析在我们实际进行机器学习项目中是非常重要的一步，它有利于提高我们的模型表现，使我们的算法逼近人类水平。</p>
<h2 id="Look-at-dev-examples-to-evaluate-ideas"><a href="#Look-at-dev-examples-to-evaluate-ideas" class="headerlink" title="Look at dev examples to evaluate ideas"></a>Look at dev examples to evaluate ideas</h2><p>假设我们有这样的一个例子，我们要做一个猫分类的分类器，但是其准确率只有90%，也就是错误率为10%。在分析了分类错误的例子后，发现图片将一些狗狗也分类成了猫，因此，我们是需要花上数月训练出一个新的狗分类模型，还是通过其他方法呢？<br><img src="https://upload-images.jianshu.io/upload_images/8636110-0e2f83c5f04414c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>误差分析流程：（尽管有些人会鄙视人工统计做法，但这种误差分析的流程可以节省时间来确定哪些是最有希望的方向，某个方向是否有价值等等）</p>
<ul>
<li>Get ~100 mislabeled dev set examples.</li>
<li>Count up how many are dogs.</li>
</ul>
<p>分析结果：如果只有5%的出错例子是狗，那么我们训练的狗分类器实际上作用不大，而只是将误差从10%下降到9.5%，但至少改善了我们算法的性能上限。再假设我们发现50%的图片是狗的照片，那么我们花时间去解决狗的图片会比较值得，因为我们的误差降到了5%。</p>
<h2 id="Evaluate-multiple-ideas-in-parallel"><a href="#Evaluate-multiple-ideas-in-parallel" class="headerlink" title="Evaluate multiple ideas in parallel"></a>Evaluate multiple ideas in parallel</h2><p>假设我们有针对猫分类器的多种改善算法性能的想法，吴老师用的是表格来表示人工过一遍我们要评估的想法。<br><img src="https://upload-images.jianshu.io/upload_images/8636110-caf8cb8796b21c6a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>在这个人工统计过程中可能会遇到其他的印象因素，比如因为图片加了滤镜导致分了错误，那么也可以再添加一列进行统计。这样的统计方式能够快速地<strong>帮助你确定算法优化的方向</strong>。通过计算不同错误标记类型占总数的百分比，可以帮助我们发现哪些问题需要优先解决，或者给你构思新优化方向的灵感。</p>
<p>在做误差分析时，有时我们会注意到验证集当中有些样本被错误标记了，要怎么做呢？请看下一节。</p>
<h1 id="清楚标注错误的数据：Cleaning-up-incorrectly-labeled-data"><a href="#清楚标注错误的数据：Cleaning-up-incorrectly-labeled-data" class="headerlink" title="清楚标注错误的数据：Cleaning up incorrectly labeled data"></a>清楚标注错误的数据：Cleaning up incorrectly labeled data</h1><p>在观察数据时，当发现一些数据的标签是错误的，是否需要花时间对标签进行修正呢？</p>
<p>首先我们可以观察训练集，如果发现这些错误是随机的，那么可以不予理会（只要数据集足够大，那么实际误差也会比较小），当然修正它也完全可以：DL algoritms are quite robust to <strong>random errors</strong> in the training set. 即深度学习算法对训练集中的随机误差是十分鲁棒的。但对于系统误差而言，深度学习算法则并不鲁棒。即如果我们始终将白色的狗标记为猫，那么我们的分类器就会一直学习错误的结果。</p>
<p>如果我们在验证集或者测试集上发现标记错误的样例，应该怎么做呢？我们也可以做误差分析，计算错误标记的例子数量。<br><img src="https://upload-images.jianshu.io/upload_images/8636110-da04376f26606d58.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>从表格中知道，一共有6%的错误标记例子，那么是否需要或者值得花时间对这些标记进行修正呢？吴恩达老师的建议是，如果这些例子验证影响了分类器在验证集上的表现，那么就需要对其进行修正；反正，则不应该花费宝贵的时间进行人工修正。</p>
<p>举一个例子进行解释：<br><img src="https://upload-images.jianshu.io/upload_images/8636110-4a79da8bd8e032f3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>对于左边的例子，我们的总体错误率为10%，而因为标记错误导致的错误率为0.6%，那么当务之急不是去修改标记，而是针对9.6%去进行算法的改善；对于右边的例子，总体错误率为2%，而因为标记错误导致的错误率为0.6%，此时修改错误标记的样本则变得很有必要。另外需要记住的是，设置验证集的目的是为了帮助我们在分类器A和B之间进行选择。</p>
<p>在对验证集/测试集进行标记的修正时，我们需要注意以下几点：</p>
<ol>
<li>Apply same process to your dev and test sets tot make sure they continue to come from the same distribution.（我们在验证集上设置目标，并且希望推广到测试集上进行目标的推广，因此两个数据集的分布需要一致。所以如果我们要对验证集进行样例修正，那么也需要对测试集这么做。）</li>
<li>Consider examining examples your algorithm got right as well as ones it got wrong.（我们不仅需要检查算法出错的例子，也需要再次检查它做对的例子，因为这些例子也可能是标记错误的，否则是不公平的。不过这种做法通常不采用，因此可能有98%做对，而2%做错，而检查98%的例子所花的时间会很多。）</li>
<li>Train and dev/test data may come from slightly different distributions.（如果我们只决定修正验证集和测试集中的标签，因为它们通常比训练集小，那么可能会在数据集的分布上有细微的差别。）</li>
</ol>
<p>因此，亲自检查数据也是很有用的，能够帮助我们确定要优秀尝试哪些方法或者想法。</p>
<h1 id="快速搭建你的第一个系统，并进行迭代"><a href="#快速搭建你的第一个系统，并进行迭代" class="headerlink" title="快速搭建你的第一个系统，并进行迭代"></a>快速搭建你的第一个系统，并进行迭代</h1><p>在这一节中，吴恩达老师讲解了快速搭建系统并且迭代这一步的重要性。他举了语音识别的例子，比如我们需要搭建一个语音识别例子，但是我们不清楚应该在哪个方向进行改进。可能的方向如下：<br><img src="https://upload-images.jianshu.io/upload_images/8636110-acd65f5c48cb9d3c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>因此，吴恩达老师建议我们，先不要想着在什么方向上下手，而是迅速开始搭建系统进行训练和迭代，再根据实际的算法表现来选定方向。整个步骤流程如下：</p>
<ol>
<li>Set up dev/test set and metric.</li>
<li>Build initial system quickly.</li>
<li>Use Bias/Variance analysis &amp; Error analysis to prioritize next steps.通过这一步找出最有希望的方向。</li>
</ol>
<p>如果我们在某个应用领域上很有经验，那么上述建议的适用程度则低一些。当在这个应用领域上有很多学术文献，这些文献处理的问题和我们要解决的几乎完全相同时，比如人脸识别有很多学术文献，那么我们完全可以从现有文献出发，一开始就搭建复杂的系统。</p>
<p>很多时候，大多数团队要么搭建了过于复杂的系统，要么搭建了过于简单的系统。因此，如果我们希望将机器学习算法应用到新的应用程序里，我们的目标是弄出能用的系统，而不是发明全新的机器学习算法，那么我们可以快速搭建你的第一个系统，并进行迭代，用他们的算法表现来做误差分析之类的，根据分析结果确定下一步优先要做的方向。</p>
<h1 id="在不同的分布上进行训练和测试"><a href="#在不同的分布上进行训练和测试" class="headerlink" title="在不同的分布上进行训练和测试"></a>在不同的分布上进行训练和测试</h1><p>深度学习算法对训练数据有着很大的需求，当我们收集到足够多带标签的数据构成训练集时，算法效果最好。这也导致很多团队用尽一切办法去收集大量数据放置到训练集中，即便这些数据与验证集、测试集来自不同的分布。在深度学习时代，越来越多的团队使用来自和验证集、测试集分布不同的数据来训练。这里有一些做法可以用来处理训练集和测试集存在差异的情况。</p>
<p>再次取猫分类的例子：<br><img src="https://upload-images.jianshu.io/upload_images/8636110-7aafc877af5260c4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>然而，来自手机app的图片只有10,000张，来自网页的图片有200,000张。而我们又不愿意直接用10,000张图片来训练，因为这样训练集的规模就太小了。而网页的图片很多，但是它又不是我们原本的分布。我们有以下两个选择：</p>
<ol>
<li><p>将所有图片随机打乱后，再划分训练集、验证集和测试集。比如设置训练集为205,000张图片，验证集为2,500张图片，测试集为2,500张图片。然而，由于我们的目的是设置验证集用来不断逼近我们的目标，但是实际上，验证集中有2381张来自网页的图片，而只有119张来自手机。也就是说，如果这样设计，那么我们会花大量时间用来优化来自网页下载的图片（不符合我们的目的）。</p>
</li>
<li><p>选择二是训练集一共有200,000张来自网页的图和5,000张来自手机的图片，而验证集和测试集都是2,500张来自手机的图片。这样划分数据的好处是我们现在瞄准的目标就是想要处理的目标，即我们的验证集包含的图片都来自手机，这就是我们真正关心的图片分布。因此我们试着搭建一个学习系统，让系统在处理手机上传图片分布时效果良好。当然，这样做的缺点是训练集和验证集/测试集的分布不同，但事实证明，这样的划分方法能够长期给你带来更好的系统性能。<br><img src="https://upload-images.jianshu.io/upload_images/8636110-a2f3061afcf667dc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
</li>
</ol>
<p>接下来看一下语音识别的例子。我们应该如何收集数据来训练产品语言识别模块呢？最后的数据集划分方法类似上面的方法2。<br><img src="https://upload-images.jianshu.io/upload_images/8636110-5753e279568bb523.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h1 id="Bias-and-Variance-with-mismatched-data-distributions"><a href="#Bias-and-Variance-with-mismatched-data-distributions" class="headerlink" title="Bias and Variance with mismatched data distributions"></a>Bias and Variance with mismatched data distributions</h1><p>估计学习算法的偏差和方差可以帮助我们确定接下来应该优化做的方向，但是，当你的训练集和验证集、测试集的分布不同时，分析偏差和方差的方式可能不同。</p>
<p>我们继续用猫分类器为例。我们可能会遇上这样的情况：<br><img src="https://upload-images.jianshu.io/upload_images/8636110-96f55fa26dd3d316.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>一般情况下，我们会认为这个算法的方差过大，而采取减小方差的方法。但是，如果训练集和验证集的分布不同，即算法因为没有看过验证集相似的数据而表现不佳，那么这可能就不是单纯的减小方差的问题。问了判断到底是否应该减小方差，我们可以设置一个training-dev set: Same distribution as training set, but not used for training.</p>
<p>一个针对training-dev set的解释。如图，数据分为了4个部分，其中training-dev set不参与训练。<br><img src="https://upload-images.jianshu.io/upload_images/8636110-85af1351aa5ff193.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>情景一：</p>
<ul>
<li>Training error:1%</li>
<li>Training-dev error: 9%</li>
<li>Dev error: 10%<br>这种情况下，发现尽管训练集和Training-dev集的分布相同，但是算法表现并不好，可以判断存在方差问题。</li>
</ul>
<p>情景二：</p>
<ul>
<li>Training error: 1%</li>
<li>Training-dev error: 1.5%</li>
<li>Dev error: 10%<br>这种情况下，我们的方差问题其实很小，因此这实际上是数据不匹配问题，因为我们的算法没有直接在Training-dev集和Dev集上训练，而且两个数据集分布不同，但是算法在前者表现好，而后者表现差，说明是数据不匹配即分布不同导致的问题。</li>
</ul>
<p>情景三：</p>
<ul>
<li>Training error: 10%</li>
<li>Training-dev error: 11%</li>
<li>Dev error: 12%<br>注意我们的人类水平即贝叶斯误差估计是0%，而这个情景很明显存在偏差问题，存在可避免偏差问题。</li>
</ul>
<p>情景四：</p>
<ul>
<li>Training error: 10%</li>
<li>Training-dev error: 11%</li>
<li>Dev error: 20%<br>这个情景存在着两个问题：第一，<strong>可避免偏差</strong>相当高，因为我们在训练集上也没有做好；第二，<strong>数据不匹配</strong>问题，可以看到Training-dev集数据集和dev数据集的表现相差很大。</li>
</ul>
<h2 id="Bias-variance-on-mismatched-training-and-dev-test-sets"><a href="#Bias-variance-on-mismatched-training-and-dev-test-sets" class="headerlink" title="Bias/variance on mismatched training and dev/test sets"></a>Bias/variance on mismatched training and dev/test sets</h2><p><img src="https://upload-images.jianshu.io/upload_images/8636110-f92f4e0d14f6090e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>对图上内容做详细解释：通过training set error和human level error，我们可以得知avoidable bias；通过training set error和training-dev set error，我们可以得知方差variance；通过training-dev set error和dev error，我们可以知道数据不匹配情况；通过dev error和test error，我们可以知道算法过拟合的程度。</p>
<p>我们观察到，上述误差是一个递增的过程，但也可能出现向下图右侧的情况：<br><img src="https://upload-images.jianshu.io/upload_images/8636110-bf2ebd879b1f7cf5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>这主要是有时候，我们的验证集/测试集分布比我们应用实际处理的数据要容易得多，那么误差真的可能如上图那样下降。</p>
<h2 id="More-general-formulation"><a href="#More-general-formulation" class="headerlink" title="More general formulation"></a>More general formulation</h2><p><img src="https://upload-images.jianshu.io/upload_images/8636110-440a23bb73685536.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>通常情况下，我们可以完成上述的一个表格，其中左边为训练数据，而右边为测试/验证数据，可以发现他们的分布不同。通过计算红框中不同的差值，我们可以判断算法的偏差、方差和数据不匹配的问题。当然，我们也可以将表格填满，从而发现人类表现在左边比在右边要更好，可以发现更多的数据特性。</p>
<p>我们在之前就讲过如何降低偏差、降低方差的方法，那么，如何处理数据不匹配的问题呢？</p>
<h1 id="定位数据不匹配：Addressing-data-mismatch"><a href="#定位数据不匹配：Addressing-data-mismatch" class="headerlink" title="定位数据不匹配：Addressing data mismatch"></a>定位数据不匹配：Addressing data mismatch</h1><p>如果我们的训练集来自和验证集/测试集不同的分布，而误差分析显示我们存在数据不匹配的问题，我们应该怎么做呢？</p>
<p>一般我们会这么做，而这种方法通常可以解决很多问题。</p>
<ul>
<li>Carry out manual error analysis to try to understand difference between traning and dev/test sets. 通常我们需要观察一下验证集的样本，弄清楚训练集和验证集的不同。就汽车语音识别系统而言，我们可能发现验证集的数据存在很多汽车噪音，这就是验证集和训练集的差异之一。当我们了解了验证集误差的性质时，我们就知道验证集和训练集不同，因此就会尝试做下一步。</li>
<li>Make training data more similar; or collect more data similar to dev/test sets. 比如，当我们发现车辆背景噪声是主要的误差来源，那么我们可以模拟车辆噪声数据；或者发现很难识别街道数据时，则下意识地添加数字的语音信息。（人工合成数据）</li>
</ul>
<h2 id="Artificial-data-synthesis"><a href="#Artificial-data-synthesis" class="headerlink" title="Artificial data synthesis"></a>Artificial data synthesis</h2><p>给出一个简单的音频合成例子：<br><img src="https://upload-images.jianshu.io/upload_images/8636110-7fab9a09060765cd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>通过人工合成数据，我们可以很方便地得到更多的数据，而不需要自己收集数据。所以，当我们的误差分析显示我们应该让自己的数据听起来像在车里录的，那么我们可以人工合成这样的音频，再给机器学习算法进行训练。</p>
<p>但是，这种人工合成数据有一个潜在问题。比如，我们在安静的背景里录得10000个小时音频数据，而只录了一个小时车辆背景噪音，我们可以尝试将车辆噪声重复10000次叠加到音频里，但是我们的学习算法会对这1小时汽车噪声过拟合。并且，如果我们只录了1个小时的车辆背景噪声，那么实际上我们可能只模拟了全部数据空间的一小部分，从汽车噪音的很小的子集中合成数据。对于我们人耳来说，这可能听起来和其他任意一小时车辆噪声是一样的，但是神经网络则会对这一小时汽车噪声造成过拟合。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8636110-0f225f4c2619ef3e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>因此，为了学习算法有更好的性能，可能有10000个小时的汽车背景噪声数据是更好的，但是可能对于人耳而言，我们可能会觉得自己得到的数据其实都是类似的。</p>
<p>再举一个汽车识别的例子。我们的学习算法可能对人工合成出的车集合产生过拟合的情况，因为它们只是所有可能出现的集合中很小的一个集合。<br><img src="https://upload-images.jianshu.io/upload_images/8636110-c60ffb7b9921f087.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>总而言之，如果认为存在数据不匹配问题，那么我们可以进行误差分析，或者看看训练集和验证集，试图了解和找出这两个数据分布的不同之处。之后再看看是否有办法手机更多类似验证集的数据进行训练。我们提高了人工合成数据的方法，这个方法确实有效。在语音识别中，吴老师说已经看到了人工数据合成显著提升了已经很好的语音识别系统的表现，因此这是可行的。但是在使用人工数据合成时，一定要谨慎，记住我们有可能从整个的可能空间中只选了很小的一部分去模拟数据。</p>
<p>上述就是如何处理数据不匹配的问题。</p>
<h1 id="迁移学习：Transfer-learning"><a href="#迁移学习：Transfer-learning" class="headerlink" title="迁移学习：Transfer learning"></a>迁移学习：Transfer learning</h1><p>深度学习最强大的理念之一是，有时候我们可以从一个任务中习得知识，再将这些知识应用到另一个独立的任务中。这叫做迁移学习。比如我们的神经网络已经学会分类猫，那么学得的经验知识也可以帮助我们识别x射线扫描图。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8636110-8bb1cf8c2d14663b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>举一个例子。假设我们用图上的神经网络进行了图像识别，识别如猫狗之类的动物，然后想用这个神经网络迁移学习其他任务的知识，如放射线诊断。那么我们可以把神经网络最后一层拿掉，然后随机初始化最后一层的权重，将目标更换为我们的放射线诊断，然后再重新训练。<em>根据经验，如果我们的新数据集很小，那么我们可以只更新最后一层和倒数第二层的权重，而前面的权重保持不变；如果我们的数据集足够，那么也可以对所有层的权重进行更新。</em></p>
<p>因此，在图像识别数据的初期训练阶段，我们称为<strong>预训练(pre-training)</strong>，因为我们在用图像数据来预训练神经网络的权重；之后，如果我们想重新更新权重，然后在放射科数据上训练，这个过程称为<strong>微调(fine tuning)</strong>。（预训练就是指预先训练的一个模型或者指预先训练模型的过程；微调就是指将预训练过的模型作用于自己的数据集，并使参数适应自己数据集的过程。）</p>
<p>更通俗的解释：</p>
<ul>
<li>你需要搭建一个网络模型来完成一个特定的图像分类的任务。首先，你需要随机初始化参数，然后开始训练网络，不断调整直到网络的损失越来越小。在训练的过程中，一开始初始化的参数会不断变化。当你觉得结果很满意的时候，你就可以将训练模型的参数保存下来，以便训练好的模型可以在下次执行类似任务时获得较好的结果。这个过程就是<strong>pre-training</strong>。</li>
<li>之后，你又接收到一个类似的图像分类的任务。这时候，你可以直接使用之前保存下来的模型的参数来作为这一任务的初始化参数（已经学习了很多低层次特征），然后在训练的过程中，依据结果不断进行一些修改。此时我们使用的是一个pre-trained模型，而训练过程称为fine tuning。</li>
</ul>
<p>为什么这样做有效果呢？对于低层次特征，比如边缘检测、曲线检测、阳性物体检测，从非常大的图像识别数据库中学得这些知识，可能有助于让我们的学习算法在放射科诊断中做得更好，因为算法学到了很多结构信息的知识，如线条、点、曲线等，从而更好的进行学习。</p>
<p>再假设我们已经训练出一个语音识别系统，输入为音频片段，输出为听写文本。然后接下来我们想要完成触发词的检测，即之前所提到过的可以启动智能家居的一些出发词，那么我们可能需要去掉神经网络的最后一层，然后加入新的输出结点，当然有时候我们甚至往神经网络中加入几个新的层，然后把唤醒词检测问题的标签Y放入进行训练。<br><img src="https://upload-images.jianshu.io/upload_images/8636110-e9c10274268d9c66.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>那么，迁移学习什么时候起作用呢？迁移学习起作用的场合时，<em>对于迁移来源问题你有着很多数据，但迁移目标问题的数据则没有多少。(反过来则不适用)</em>例如，图像识别任务中我们有10,000,000个样本，在神经网络的前面几层可以学习到很多知识，但对于放射任务，我们只有100个样本，因此我们可以迁移从图像识别训练中学到的知识，帮我们加强放射科识别任务的性能；再例如，我们已经通过10,000个小时的数据中学到了很多人类声音的特征，但对于触发词检测，我们只有1个小时的数据，因此在这种情况下，预先学到很多人类声音的特征、人类语言的组成部分等等，能够帮助我们开发出一个很好的触发词检测系统，尽管我们的数据集相对较小。</p>
<h2 id="When-transfer-learning-makes-sense"><a href="#When-transfer-learning-makes-sense" class="headerlink" title="When transfer learning makes sense"></a>When transfer learning makes sense</h2><ul>
<li>Task A and B have the same input x.</li>
<li>You have a lot more data for Task A than Task B.</li>
<li>Low level features from A coule be helpful for learning B.</li>
</ul>
<h1 id=""><a href="#" class="headerlink" title=" "></a> </h1>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag"><i class="fa fa-tag"></i> python</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/18/deep-learningw8/" rel="next" title="第8周-机器学习ML策略(1)">
                <i class="fa fa-chevron-left"></i> 第8周-机器学习ML策略(1)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="DesmonDay" />
          <p class="site-author-name" itemprop="name">DesmonDay</p>
           
              <p class="site-description motion-element" itemprop="description">主攻方向：NLP</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">103</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/DesmonDay" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#进行误差分析：Carrying-out-error-analysis"><span class="nav-number">1.</span> <span class="nav-text">进行误差分析：Carrying out error analysis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Look-at-dev-examples-to-evaluate-ideas"><span class="nav-number">1.1.</span> <span class="nav-text">Look at dev examples to evaluate ideas</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Evaluate-multiple-ideas-in-parallel"><span class="nav-number">1.2.</span> <span class="nav-text">Evaluate multiple ideas in parallel</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#清楚标注错误的数据：Cleaning-up-incorrectly-labeled-data"><span class="nav-number">2.</span> <span class="nav-text">清楚标注错误的数据：Cleaning up incorrectly labeled data</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#快速搭建你的第一个系统，并进行迭代"><span class="nav-number">3.</span> <span class="nav-text">快速搭建你的第一个系统，并进行迭代</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#在不同的分布上进行训练和测试"><span class="nav-number">4.</span> <span class="nav-text">在不同的分布上进行训练和测试</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Bias-and-Variance-with-mismatched-data-distributions"><span class="nav-number">5.</span> <span class="nav-text">Bias and Variance with mismatched data distributions</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Bias-variance-on-mismatched-training-and-dev-test-sets"><span class="nav-number">5.1.</span> <span class="nav-text">Bias/variance on mismatched training and dev/test sets</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#More-general-formulation"><span class="nav-number">5.2.</span> <span class="nav-text">More general formulation</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#定位数据不匹配：Addressing-data-mismatch"><span class="nav-number">6.</span> <span class="nav-text">定位数据不匹配：Addressing data mismatch</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Artificial-data-synthesis"><span class="nav-number">6.1.</span> <span class="nav-text">Artificial data synthesis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">6.2.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#迁移学习：Transfer-learning"><span class="nav-number">7.</span> <span class="nav-text">迁移学习：Transfer learning</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#When-transfer-learning-makes-sense"><span class="nav-number">7.1.</span> <span class="nav-text">When transfer learning makes sense</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#"><span class="nav-number">8.</span> <span class="nav-text"> </span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DesmonDay</span>
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>


